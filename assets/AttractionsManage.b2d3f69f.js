import{_ as A,t as B,r as u,k as L,h as N,o as i,c as r,a as e,w as f,v as b,l as O,u as $,b as E,d as j,F as U,m as I,i as c,g as F,e as C}from"./index.654cc2ea.js";import{M as H,i as R,a as M}from"./infoModal.6a777ece.js";const T={props:{currentItem:{type:Object,default:()=>{}},isNew:{type:Boolean,default:!1}},setup(x,{emit:o}){const{currentItem:_,isNew:t}=B(x),g={title:"",category:"",description:"",price:0,origin_price:0,imagesUrl:[],imageUrl:"",is_enabled:0},m=u({}),s=u(!1);function n(){}const p=u(null),a=u(null);function d(){a.value.show()}function P(){a.value.hide()}function y(w){t.value?(o("add-product",w),m.value={...g}):(o("update-product",w),m.value={...g})}return L(()=>{t.value?m.value={...g}:m.value={..._.value}}),N(()=>{a.value=new H(p.value)}),{tempProduct:m,uploadImg:n,imgUploadLoading:s,modal:p,openModal:d,hideModal:P,confirm:y}}},q={class:"modal fade fixed top-0 left-0 hidden w-full h-full outline-none overflow-x-hidden overflow-y-auto",id:"exampleModalCenteredScrollable",tabindex:"-1","aria-labelledby":"exampleModalCenteredScrollable","aria-modal":"true",role:"dialog",ref:"modal"},z={class:"modal-dialog modal-dialog-centered modal-dialog-scrollable relative w-auto pointer-events-none"},G={class:"modal-content border-none shadow-lg relative flex flex-col w-full pointer-events-auto bg-white bg-clip-padding rounded-md outline-none text-current"},J={class:"modal-header flex flex-shrink-0 items-center justify-between p-4 border-b border-gray-200 rounded-t-md"},K={class:"text-xl font-medium leading-normal text-gray-800",id:"exampleModalCenteredScrollableLabel"},Q={key:0},W={key:1},X=e("button",{type:"button",class:"btn-close box-content w-4 h-4 p-1 text-black border-none rounded-none opacity-50 focus:shadow-none focus:outline-none focus:opacity-100 hover:text-black hover:opacity-75 hover:no-underline","data-bs-dismiss":"modal","aria-label":"Close"},null,-1),Y={class:"modal-body relative p-4"},Z={class:"grid grid-cols-12 gap-4"},ee={class:"col-span-4 flex justify-center"},te={class:"mb-3 xl:w-96"},oe=e("label",{for:"imgUrl",class:"form-label inline-block mb-2 text-gray-700"},"\u8F38\u5165\u5716\u7247\u7DB2\u5740",-1),se=["src","alt"],le={class:"col-span-8"},ne={class:"flex justify-center"},ae={class:"mb-3 xl:w-96"},ie=e("label",{for:"title",class:"form-label inline-block mb-2 text-gray-700"},"\u6A19\u984C",-1),re={class:"grid grid-cols-2 gap-4"},de={class:"flex justify-center"},ce={class:"mb-3 xl:w-96"},ue=e("label",{for:"category",class:"form-label inline-block mb-2 text-gray-700"},"\u5206\u985E",-1),ge={class:"flex justify-center"},me={class:"mb-3 xl:w-96"},fe=e("label",{for:"unit",class:"form-label inline-block mb-2 text-gray-700"},"\u55AE\u4F4D",-1),be={class:"grid grid-cols-2 gap-4"},pe={class:"flex justify-center"},he={class:"mb-3 xl:w-96"},xe=e("label",{for:"originPrice",class:"form-label inline-block mb-2 text-gray-700"},"\u539F\u50F9",-1),_e={class:"flex justify-center"},ye={class:"mb-3 xl:w-96"},ve=e("label",{for:"price",class:"form-label inline-block mb-2 text-gray-700"},"\u552E\u50F9",-1),we=e("hr",null,null,-1),ke={class:"flex justify-center"},Me={class:"mb-3 xl:w-96"},Pe=e("label",{for:"briefDescription",class:"form-label inline-block mb-2 text-gray-700"},"\u666F\u9EDE\u7C21\u8FF0",-1),je={class:"flex justify-center"},Ue={class:"mb-3 xl:w-96"},Ie=e("label",{for:"description",class:"form-label inline-block mb-2 text-gray-700"},"\u666F\u9EDE\u8AAA\u660E",-1),Ce={class:"flex justify-center"},Ae={class:"form-check form-switch"},Ne=e("label",{class:"form-check-label inline-block text-gray-800",for:"activate"},"\u662F\u5426\u555F\u7528",-1),Ve={class:"modal-footer flex flex-shrink-0 flex-wrap items-center justify-end p-4 border-t border-gray-200 rounded-b-md"},De=e("button",{type:"button",class:"inline-block px-6 py-2.5 bg-purple-600 text-white font-medium text-xs leading-tight uppercase rounded shadow-md hover:bg-purple-700 hover:shadow-lg focus:bg-purple-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-purple-800 active:shadow-lg transition duration-150 ease-in-out","data-bs-dismiss":"modal"}," \u53D6\u6D88 ",-1);function Se(x,o,_,t,g,m){return i(),r("div",null,[e("div",q,[e("div",z,[e("div",G,[e("div",J,[e("h5",K,[_.isNew?(i(),r("span",Q,"\u65B0\u589E\u7522\u54C1")):(i(),r("span",W,"\u7DE8\u8F2F\u7522\u54C1"))]),X]),e("div",Y,[e("div",Z,[e("div",ee,[e("div",te,[oe,f(e("input",{type:"url",class:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none",id:"imgUrl","onUpdate:modelValue":o[0]||(o[0]=s=>t.tempProduct.imageUrl=s),placeholder:"\u8ACB\u8F38\u5165\u5716\u7247\u7DB2\u5740"},null,512),[[b,t.tempProduct.imageUrl]]),e("img",{class:"w-full h-auto block mt-2",src:t.tempProduct.imageUrl,alt:t.tempProduct.imageUrl},null,8,se)])]),e("div",le,[e("div",ne,[e("div",ae,[ie,f(e("input",{type:"text",class:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none",id:"title","onUpdate:modelValue":o[1]||(o[1]=s=>t.tempProduct.title=s),placeholder:"\u8ACB\u8F38\u5165\u6A19\u984C"},null,512),[[b,t.tempProduct.title]])])]),e("div",re,[e("div",de,[e("div",ce,[ue,f(e("input",{type:"text",class:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none",id:"category","onUpdate:modelValue":o[2]||(o[2]=s=>t.tempProduct.category=s),placeholder:"\u8ACB\u8F38\u5165\u5206\u985E"},null,512),[[b,t.tempProduct.category]])])]),e("div",ge,[e("div",me,[fe,f(e("input",{type:"text",class:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none",id:"unit","onUpdate:modelValue":o[3]||(o[3]=s=>t.tempProduct.unit=s),placeholder:"\u8ACB\u8F38\u5165\u55AE\u4F4D"},null,512),[[b,t.tempProduct.unit]])])])]),e("div",be,[e("div",pe,[e("div",he,[xe,f(e("input",{type:"number",class:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none",id:"originPrice","onUpdate:modelValue":o[4]||(o[4]=s=>t.tempProduct.origin_price=s),placeholder:"\u8ACB\u8F38\u5165\u539F\u50F9"},null,512),[[b,t.tempProduct.origin_price,void 0,{number:!0}]])])]),e("div",_e,[e("div",ye,[ve,f(e("input",{type:"number",class:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none",id:"price","onUpdate:modelValue":o[5]||(o[5]=s=>t.tempProduct.price=s),placeholder:"\u8ACB\u8F38\u5165\u552E\u50F9"},null,512),[[b,t.tempProduct.price]])])])]),we,e("div",ke,[e("div",Me,[Pe,f(e("textarea",{class:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none",id:"briefDescription",rows:"3","onUpdate:modelValue":o[6]||(o[6]=s=>t.tempProduct.description=s),placeholder:"\u8ACB\u8F38\u5165\u666F\u9EDE\u7C21\u8FF0"},null,512),[[b,t.tempProduct.description]])])]),e("div",je,[e("div",Ue,[Ie,f(e("textarea",{class:"form-control block w-full px-3 py-1.5 text-base font-normal text-gray-700 bg-white bg-clip-padding border border-solid border-gray-300 rounded transition ease-in-out m-0 focus:text-gray-700 focus:bg-white focus:border-blue-600 focus:outline-none",id:"description",rows:"3","onUpdate:modelValue":o[7]||(o[7]=s=>t.tempProduct.content=s),placeholder:"\u8ACB\u8F38\u5165\u666F\u9EDE\u8AAA\u660E"},null,512),[[b,t.tempProduct.content]])])]),e("div",Ce,[e("div",Ae,[f(e("input",{class:"form-check-input appearance-none w-9 -ml-10 rounded-full float-left h-5 align-top bg-white bg-no-repeat bg-contain bg-gray-300 focus:outline-none cursor-pointer shadow-sm",type:"checkbox",role:"switch","onUpdate:modelValue":o[8]||(o[8]=s=>t.tempProduct.is_enabled=s),"true-value":1,"false-value":0,id:"activate"},null,512),[[O,t.tempProduct.is_enabled]]),Ne])])])])]),e("div",Ve,[De,e("button",{type:"button",class:"inline-block px-6 py-2.5 bg-blue-600 text-white font-medium text-xs leading-tight uppercase rounded shadow-md hover:bg-blue-700 hover:shadow-lg focus:bg-blue-700 focus:shadow-lg focus:outline-none focus:ring-0 active:bg-blue-800 active:shadow-lg transition duration-150 ease-in-out ml-1",onClick:o[9]||(o[9]=s=>t.confirm(t.tempProduct))}," \u78BA\u8A8D ")])])])],512)])}const Be=A(T,[["render",Se]]),Le={components:{editModal:Be,infoModal:R},setup(){const x=u([]),o=u({}),_=$(),t=E(),g=u(!1);function m(l){o.value=l}const s=u(null),n=u({title:"\u63D0\u793A",message:"",status:""});function p(l){o.value=l,n.value.title="\u522A\u9664\u63D0\u793A",n.value.message="\u8ACB\u78BA\u8A8D\u662F\u5426\u8981\u522A\u9664!",n.value.status="delete",s.value.openModal()}function a(){s.value.hideModal(),n.value.title="\u63D0\u793A",n.value.message="",n.value.status=""}const d=u(null);function P(l){o.value=l,g.value=!1,d.value.openModal()}function y(){d.value.hideModal()}function w(){g.value=!0,d.value.openModal()}async function V(l){const{id:h}=l,v=await M.editAdminProduct(h,l);y(),v.success?(n.value.message=v.message,s.value.openModal()):(typeof v.response.data.message=="string"?n.value.message=v.response.data.message:n.value.message=v.response.data.message.join(", "),s.value.openModal()),k()}async function D(l){const h=await M.addAdminProduct(l);y(),h.success?(n.value.message=h.message,s.value.openModal()):(typeof h.response.data.message=="string"?n.value.message=h.response.data.message:n.value.message=h.response.data.message.join(", "),s.value.openModal()),k()}async function k(){const l=await M.getAdminProducts();l.success?x.value=l.products:(typeof l.response.data.message=="string"?n.value.message=l.response.data.message:n.value.message=l.response.data.message.join(", "),s.value.openModal())}async function S(){a();const l=await M.deleteAdminProduct(o.value.id);console.log(l),l.success?n.value.message=l.message:typeof l.response.data.message=="string"?n.value.message=l.response.data.message:n.value.message=l.response.data.message.join(", "),s.value.openModal(),k()}return N(()=>{_.$state.login?k():t.push("/")}),{data:x,currentItem:o,check:m,modal:d,infoModal:s,messageContent:n,openModal:P,hideModal:y,openNewModal:w,openDeleteModal:p,hideInfoModal:a,isNew:g,editAdminProduct:V,addAdminProduct:D,deleteAdminProduct:S}}},Oe={class:"grid gap-2 grid-cols-1 xl:grid-cols-2"},$e={class:"flex flex-col mb-8 xl:mb-0"},Ee={class:"overflow-x-auto sm:-mx-6 lg:-mx-8"},Fe={class:"py-4 inline-block min-w-full sm:px-6 lg:px-8"},He={class:"flex justify-end mb-5"},Re={class:"overflow-hidden border border-solid border-gray-300"},Te={class:"min-w-full text-center"},qe=e("thead",{class:"border-b bg-gray-800"},[e("tr",null,[e("th",{scope:"col",class:"text-sm font-medium text-white px-6 py-4"}," \u7522\u54C1\u540D\u7A31 "),e("th",{scope:"col",class:"text-sm font-medium text-white px-6 py-4"}," \u539F\u50F9 "),e("th",{scope:"col",class:"text-sm font-medium text-white px-6 py-4"}," \u552E\u50F9 "),e("th",{scope:"col",class:"text-sm font-medium text-white px-6 py-4"}," \u662F\u5426\u555F\u7528 "),e("th",{scope:"col",class:"text-sm font-medium text-white px-6 py-4"}," \u67E5\u770B\u7D30\u7BC0 ")])],-1),ze={class:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900"},Ge={class:"text-sm text-gray-900 font-light px-6 py-4 whitespace-nowrap"},Je={class:"text-sm text-gray-900 font-light px-6 py-4 whitespace-nowrap"},Ke={class:"text-sm text-gray-900 font-light px-6 py-4 whitespace-nowrap"},Qe={class:"flex justify-center"},We={class:"form-check form-switch"},Xe=["checked"],Ye=e("label",{class:"form-check-label inline-block text-gray-800",for:"flexSwitchCheckDefault"},null,-1),Ze={class:"text-sm text-gray-900 font-light px-6 py-4 whitespace-nowrap"},et={class:"flex items-center justify-center"},tt={class:"inline-flex shadow-md hover:shadow-lg focus:shadow-lg",role:"group"},ot=["onClick"],st=["onClick"],lt=["onClick"],nt={class:"font-semibold"},at=e("h2",{class:"text-4xl mb-5 font-bold"},"\u8A73\u60C5\u5982\u4E0B",-1),it={key:0,class:"flex justify-center"},rt={class:"flex flex-col md:flex-row rounded-lg bg-white shadow-lg"},dt=["src","alt"],ct={class:"p-6 flex flex-col justify-start"},ut={class:"text-gray-900 text-xl font-medium mb-2"},gt={class:"text-gray-700 text-base mb-2"},mt={class:"text-gray-700 text-base mb-4"},ft={class:"text-gray-600 text-xs"},bt={key:0,class:"grid gap-1 grid-rows-1 grid-cols-3 shadow-lg"},pt=["src","alt"],ht={key:1},xt={key:1,class:"text-gray-600"};function _t(x,o,_,t,g,m){var p;const s=j("editModal"),n=j("infoModal");return i(),r("main",null,[e("div",Oe,[e("div",$e,[e("div",Ee,[e("div",Fe,[e("div",He,[e("button",{type:"button",class:"inline-block px-6 py-2 border-2 border-gray-800 text-gray-800 font-medium text-xs leading-tight uppercase rounded hover:bg-black hover:bg-opacity-5 focus:outline-none focus:ring-0 transition duration-150 ease-in-out font-bold",onClick:o[0]||(o[0]=(...a)=>t.openNewModal&&t.openNewModal(...a))},"\u65B0\u589E\u7522\u54C1")]),e("div",Re,[e("table",Te,[qe,e("tbody",null,[(i(!0),r(U,null,I(t.data,a=>(i(),r("tr",{class:"bg-white border-b",key:a.id},[e("td",ze,c(a.title),1),e("td",Ge,c(a.origin_price),1),e("td",Je,c(a.price),1),e("td",Ke,[e("div",Qe,[e("div",We,[e("input",{class:"form-check-input appearance-none w-9 -ml-10 rounded-full float-left h-5 align-top bg-white bg-no-repeat bg-contain bg-gray-300 focus:outline-none cursor-pointer shadow-sm",type:"checkbox",role:"switch",id:"flexSwitchCheckDefault",checked:a.is_enabled===1},null,8,Xe),Ye])])]),e("td",Ze,[e("div",et,[e("div",tt,[e("button",{type:"button",class:"rounded-l inline-block px-4 py-1.5 bg-gray-800 text-white font-medium text-xs leading-tight uppercase hover:bg-gray-900 focus:bg-gray-900 focus:outline-none focus:ring-0 active:bg-gray-900 transition duration-150 ease-in-out",onClick:d=>t.check(a)},"\u67E5\u770B",8,ot),e("button",{type:"button",class:"inline-block px-4 py-1.5 bg-gray-800 text-white font-medium text-xs leading-tight uppercase hover:bg-gray-900 focus:bg-gray-900 focus:outline-none focus:ring-0 active:bg-gray-900 transition duration-150 ease-in-out",onClick:d=>t.openModal(a)},"\u7DE8\u8F2F",8,st),e("button",{type:"button",class:"rounded-r inline-block px-4 py-1.5 bg-gray-800 text-white font-medium text-xs leading-tight uppercase hover:bg-gray-900 focus:bg-gray-900 focus:outline-none focus:ring-0 active:bg-gray-900 transition duration-150 ease-in-out",onClick:d=>t.openDeleteModal(a)},"\u522A\u9664",8,lt)])])])]))),128))])])])])]),e("p",nt,"\u76EE\u524D\u6709\u7522\u54C1 "+c(Object.keys(t.data).length)+" \u9805",1)]),e("div",null,[at,Object.keys(t.currentItem).length>0?(i(),r("div",it,[e("div",rt,[e("img",{class:"w-full h-96 md:h-auto object-cover md:w-48 rounded-t-lg md:rounded-none md:rounded-l-lg",src:t.currentItem.imageUrl,alt:t.currentItem.title},null,8,dt),e("div",ct,[e("h5",ut,c(t.currentItem.title),1),e("p",gt,c(t.currentItem.category),1),e("p",mt,c(t.currentItem.description),1),e("p",null,[F(c(t.currentItem.price)+"/"+c(t.currentItem.unit)+" ",1),e("span",ft,"\u9084\u5269"+c(t.currentItem.num)+"\u500B",1)]),(p=t.currentItem.imagesUrl)!=null&&p.length?(i(),r("div",bt,[(i(!0),r(U,null,I(t.currentItem.imagesUrl,(a,d)=>(i(),r("img",{key:d,class:"h-40 w-40 block object-cover",src:a,alt:a},null,8,pt))),128))])):(i(),r("div",ht))])])])):(i(),r("p",xt,"\u8ACB\u9078\u64C7\u55AE\u4E00\u7522\u54C1\u67E5\u770B"))])]),C(s,{ref:"modal",currentItem:t.currentItem,isNew:t.isNew,onUpdateProduct:t.editAdminProduct,onAddProduct:t.addAdminProduct},null,8,["currentItem","isNew","onUpdateProduct","onAddProduct"]),C(n,{ref:"infoModal",content:t.messageContent,onDeleteProduct:t.deleteAdminProduct,onHideModal:t.hideInfoModal},null,8,["content","onDeleteProduct","onHideModal"])])}const wt=A(Le,[["render",_t]]);export{wt as default};
